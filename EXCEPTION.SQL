EXCEPTION

---PRE DEFINE EXCEPTION
--- ERR CODE ERR MESSAGE ERR LINE
ZERO DEVIDE
NO DATA FOUND
TOO MANY ROWS 
OTHERS


/*
USER DEFINE EXCEPTION
 WE DECLAR A VARIABLE AS EXCEPTION AND ENABLE IT USING THE RAISE KEYWORD AND HANDL IT IN THE EXCEPTION BLOCK
 DEFAULT ERROR  CODE ORA-06510 ERROR MESSAE UNHANLDE USER DEFINED EXCEPTION
*/ 
 
 
 DECLARE 
 V1 EXCEPTION;
 A NUMBER;
 BEGIN
 A:=5;
 DBMS_OUTPUT.PUT_LINE(A);
 --A:=A/0;
 RAISE V1 ;
 DBMS_OUTPUT.PUT_LINE(A);
 A:=5+A;
 DBMS_OUTPUT.PUT_LINE(A);
 EXCEPTION
 WHEN V1 THEN
 DBMS_OUTPUT.PUT_LINE('USER DEFINE EXCEPTION');
 WHEN OTHERS THEN
 DBMS_OUTPUT.PUT_LINE('ZERO DEVIDE');
 END;
 / 
 
 DECLARE 
 V1 EXCEPTION;
 V2 EXCEPTION;
 A NUMBER;
 BEGIN
 A:=5;
 DBMS_OUTPUT.PUT_LINE(A);
 RAISE V1 ; --- ORA-06510: PL/SQL: unhandled user-defined exception
 RAISE V2 ; --- ORA-06510: PL/SQL: unhandled user-defined exception
 END;
 /


PRE DEFINED EXCEPTION
ERROR NAME -- ZERO DEVIDE,TOO MANY ROWS
ERROR CODE -- ORA NUMBER
ERROR MESSAGE -- DIVISOR IS EQUAL TO ZERO

PRAGMA EXCEPTION_INIT -- WE CAN GIVE ERROR CODE TO THE USER DEFINED EXCEPTIONS
ERROR NAME -- DEFAULT VARIABL
ERROR CODE -- DEFAULT VALUE -- USING PRAGMA EXCEPTION INIT WE CAN SET THE ERROR CODE
ERROR MESSAGE -- DEFAULT VALUE


 DECLARE 
 V1 EXCEPTION;
 PRAGMA EXCEPTION_INIT(V1,-20007);  -- LIMIT -20000 TO -20999
 A NUMBER;
 BEGIN
 A:=5;
 A:= A*A;
 IF A > 20 THEN 
 RAISE V1 ;
 END IF ;
 DBMS_OUTPUT.PUT_LINE('NEW VALUE IS '|| A);
 END;
 /
 
 

 DECLARE 
 V1 EXCEPTION;
 PRAGMA EXCEPTION_INIT(V1,-20007);  -- LIMIT -20000 TO -20999
 A NUMBER;
 BEGIN
 A:=5;
 A:= A*A;
 IF A > 20 THEN 
 RAISE V1 ;
 END IF ;
 DBMS_OUTPUT.PUT_LINE('NEW VALUE IS '|| A);
/*EXCEPTION
 WHEN V1 THEN
 DBMS_OUTPUT.PUT_LINE(' DATA MORE THAN 20');
  WHEN OTHERS THEN 
 DBMS_OUTPUT.PUT_LINE('OTHER ERROR');*/
 END;
 / 
 

DECLARE
A NUMBER;
BEGIN
A:=5;
RAISE_APPLICATION_ERROR(-20071,'UNNAMED EXCEPTION');
/*EXCEPTION
WHEN OTHERS THEN
 DBMS_OUTPUT.PUT_LINE('OTHER ERROR');*/
END;
/





/*CREATE TABLE ERROR_LOG(VCODE VARCHAR2(1000),VMESS VARCHAR2(1000),SYSDTAE VARCHAR2(1000),OBJ_NAME VARCHAR2(1000));
CREATE TABLE T2(C1 NUMBER,C2 NUMBER);
CREATE TABLE T3(C1 NUMBER,C2 NUMBER);
*/

DECLARE 
VCODE VARCHAR2(1000);
VMESS VARCHAR2(1000)
BEGIN
INSERT INTO T2 VALUES(2,2);
INSERT INTO T3 VALUES(3,3,3);
COMMIT;
EXCEPTION 
WHEN OTHERS THEN
ROLLBACK;
VCODE := SQLCODE;
VMESS := SQLERRM;
INSERT INTO ERROR_LOG(VCODE,VMESS,TIMESTAMP,'PROCEDURE NAME');
COMMIT;
END;
/


BEGIN
INSERT INTO T3 VALUES(4,4);
COMMIT;
END;
/


DECLARE
A NUMBER;
BEGIN 
DBMS_OUTPUT.PUT_LINE('CODE STARTS');
A:=5;
DBMS_OUTPUT.PUT_LINE('A VALUE '||A);
BEGIN
A:=A/0;
EXCEPTION
WHEN OTHERS THEN
A:=2;
END;
DBMS_OUTPUT.PUT_LINE('UPDATED VALUE '||A);
A:=A*10;
DBMS_OUTPUT.PUT_LINE('FINAL VALUE '||A);
END;
/





















 